import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# ====================
# VK API –ù–ê–°–¢–†–û–ô–ö–ò
# ====================

# –¢–æ–∫–µ–Ω –≥—Ä—É–ø–ø—ã VK
VK_GROUP_TOKEN = os.getenv("VK_GROUP_TOKEN")

# ID –≥—Ä—É–ø–ø—ã VK
VK_GROUP_ID = int(os.getenv("VK_GROUP_ID", 0))

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–∫–µ–Ω (–¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
USER_TOKEN = os.getenv("USER_TOKEN")

# –¢–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ)
ADMIN_USER_TOKEN = os.getenv("ADMIN_USER_TOKEN")


# ====================
# –ù–ê–°–¢–†–û–ô–ö–ò –ß–ê–¢–û–í
# ====================

# ID —á–∞—Ç–∞ –¥–ª—è –†–ü (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞—Ä–ø–ª–∞—Ç–µ –†–ü)
RP_CHAT_ID = int(os.getenv("RP_CHAT_ID", 0))

# ID –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–∞—Ç–∞ (–¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π)
MAIN_CHAT_ID = int(os.getenv("MAIN_CHAT_ID", 0))


# ====================
# –ê–î–ú–ò–ù–´
# ====================

# –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
admin_ids_str = os.getenv("ADMIN_IDS", "")
try:
    ADMIN_IDS = [
        int(x.strip()) 
        for x in admin_ids_str.split(",") 
        if x.strip().isdigit()
    ]
except:
    ADMIN_IDS = []
    print("‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ ADMIN_IDS! –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫.")


# ====================
# –ë–ê–ó–ê –î–ê–ù–ù–´–•
# ====================

# URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
raw_db_url = os.getenv("DATABASE_URL", "")

# –§–∏–∫—Å –¥–ª—è Supabase (–º–µ–Ω—è–µ–º postgresql:// –Ω–∞ postgres://)
DATABASE_URL = raw_db_url.replace("postgresql://", "postgres://")

if not DATABASE_URL:
    print("‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! DATABASE_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")


# ====================
# –ù–ê–°–¢–†–û–ô–ö–ò –ë–û–¢–ê
# ====================

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–∞–Ω—Ç–∏-—Å–ø–∞–º)
RATE_LIMIT_SECONDS = float(os.getenv("RATE_LIMIT_SECONDS", 1.5))

# –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –¥–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
STARTING_BALANCE = int(os.getenv("STARTING_BALANCE", 1000))


# ====================
# –ö–ê–†–¢–ò–ù–ö–ò –î–õ–Ø –ö–ï–ô–°–û–í
# ====================

# –°–ª–æ–≤–∞—Ä—å —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–¥–∞—Ä–∫–æ–≤
# –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å ID —Ñ–æ—Ç–æ –∏–∑ VK –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å None
GIFT_IMAGES = {
    "–í–∞–ª—é—Ç–∞": None,      # GiftType.MONEY
    "–ü—Ä–µ–¥–º–µ—Ç": None,     # GiftType.ITEM
    "–¢–∞–ª–∞–Ω—Ç": None,      # GiftType.TALENT
    "–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å": None, # GiftType.LUCKY
    "–°—É–¥—å–±–∞": None       # GiftType.FATE
}

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
# GIFT_IMAGES = {
#     "–í–∞–ª—é—Ç–∞": "photo-123456_789012",
#     "–ü—Ä–µ–¥–º–µ—Ç": "photo-123456_789013",
#     ...
# }


# ====================
# –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# ====================

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
DEBUG_MODE = os.getenv("DEBUG_MODE", "False").lower() == "true"

# –ü–æ—Ä—Ç –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–¥–ª—è keep-alive)
WEB_PORT = int(os.getenv("PORT", 8080))


# ====================
# –í–´–í–û–î –ù–ê–°–¢–†–û–ï–ö –ü–†–ò –ó–ê–ü–£–°–ö–ï
# ====================

if __name__ == "__main__":
    print("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó")
    print("‚ïë  ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò –ë–û–¢–ê   ‚ïë")
    print("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n")
    
    print(f"üîë VK_GROUP_TOKEN: {'‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if VK_GROUP_TOKEN else '‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}")
    print(f"üÜî VK_GROUP_ID: {VK_GROUP_ID if VK_GROUP_ID > 0 else '‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}")
    print(f"üë§ ADMIN_USER_TOKEN: {'‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if ADMIN_USER_TOKEN else '‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}")
    print(f"\nüë• –ê–¥–º–∏–Ω–æ–≤: {len(ADMIN_IDS)}")
    if ADMIN_IDS:
        for admin_id in ADMIN_IDS:
            print(f"   ‚îî‚îÄ {admin_id}")
    
    print(f"\nüíæ DATABASE_URL: {'‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if DATABASE_URL else '‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}")
    print(f"‚è± RATE_LIMIT: {RATE_LIMIT_SECONDS}s")
    print(f"üí∞ STARTING_BALANCE: {STARTING_BALANCE}‚ÇΩ")
    print(f"üåê WEB_PORT: {WEB_PORT}")
    print(f"üêõ DEBUG_MODE: {'‚úÖ –í–∫–ª—é—á–µ–Ω' if DEBUG_MODE else '‚ùå –í—ã–∫–ª—é—á–µ–Ω'}")
    
    print("\n{'‚ïê' * 40}\n")
    
    if not VK_GROUP_TOKEN:
        print("‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: VK_GROUP_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
        print("   –î–æ–±–∞–≤—å —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª!")
    
    if not DATABASE_URL:
        print("‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: DATABASE_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
        print("   –î–æ–±–∞–≤—å URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ .env —Ñ–∞–π–ª!")
    
    if not ADMIN_IDS:
        print("‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: –ù–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤!")
        print("   –î–æ–±–∞–≤—å ADMIN_IDS –≤ .env —Ñ–∞–π–ª!")
